<span name="attr_Fertigkeits_Wert"></span>
<span name="attr_Eigenschafts_Wert"></span>
<table>
    <tr>
        <td valign="top" align="center" width="50%">
<!-- Name & Konzept -->
<table border='0'>
    <tr>
        <td>Name:</td>
        <td><input type="text" name="attr_Name" /></td>
    </tr>
    <tr>
        <td>Konzept:</td>
        <td><input type="text" name="attr_Konzept" /><br></td>
    </tr>
</table>
<p><br></p>
<!-- Aspekte -->
<table border='0'>
    <tr>
        <th colspan='2'>Aspekte</th>
    </tr>
    <tr>
        <td>Rasse: </td>
        <td><input type="text" name="attr_Rasse" /></td>
    </tr>
    <tr>
        <td>Herkunft: </td>
        <td><input type="text" name="attr_Herkunft" /></td>
    </tr>
    <tr>
        <td>Vorteil: </td>
        <td><input type="text" name="attr_Vorteil" /></td>
    </tr>
    <tr>
        <td>Nachteil: </td>
        <td><input type="text" name="attr_Nachteil" /></td>
    </tr>
</table><br>
Kampagnen Aspekte:<br>
<input type="text" name="attr_Kampagnen_Aspekte" />
<br><br><br>
<!-- Fertigkeiten -->
<table border='0'>
    <tr>
        <th colspan='3'>Fertigkeiten</th>
    </tr>
    <tr>
      <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_1_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_1" /></td>
        <td><input type="number" name="attr_Fertigkeit_1_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_2_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_2" /></td>
        <td><input type="number" name="attr_Fertigkeit_2_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_3_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_3" /></td>
        <td><input type="number" name="attr_Fertigkeit_3_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_4_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_4" /></td>
        <td><input type="number" name="attr_Fertigkeit_4_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_5_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_5" /></td>
        <td><input type="number" name="attr_Fertigkeit_5_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_6_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_6" /></td>
        <td><input type="number" name="attr_Fertigkeit_6_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_7_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_7" /></td>
        <td><input type="number" name="attr_Fertigkeit_7_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_8_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_8" /></td>
        <td><input type="number" name="attr_Fertigkeit_8_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_9_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_9" /></td>
        <td><input type="number" name="attr_Fertigkeit_9_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_10_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_10" /></td>
        <td><input type="number" name="attr_Fertigkeit_10_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_11_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_11" /></td>
        <td><input type="number" name="attr_Fertigkeit_11_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_12_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_12" /></td>
        <td><input type="number" name="attr_Fertigkeit_12_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_13_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_13" /></td>
        <td><input type="number" name="attr_Fertigkeit_13_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_14_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_14" /></td>
        <td><input type="number" name="attr_Fertigkeit_14_wert" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Fertigkeit" value="Fertigkeit_15_wert"></td>
        <td><input type="text" name="attr_Fertigkeit_15" /></td>
        <td><input type="number" name="attr_Fertigkeit_15_wert" /></td>
    </tr>
</table>
</td>
        <td valign="top" align="center" width="50%">
Anzahl an Würfel: <span name="attr_Wuerfel" value="0"></span><br>
Anzahl an Steigerungspunkten: <span name="attr_Steigerungspunkte"></span>

<!-- Sheet roll html -->
<table align="center">
  <tr>
    <td>d12</td>
    <td>d8</td>
    <td>d6</td>
    <td>Übrige Würfel: <span name="attr_SR_RemainingDice" value="0" /></td>
  </tr>
  <tr>
    <td><input type="number" name="attr_Die_D12" /></td>
    <td><input type="number" name="attr_Die_D8" /></td>
    <td><input type="number" name="attr_Die_D6" /></td>
    <td>Übrige SP: <span name="attr_SR_RemainingSteigerungspunkte" value="0" /></td>
  </tr>
</table>

<!-- Allgemein -->
<table align="center">
    <tr>
        <td>Level</td>
        <td>Splitter</td>
        <td>Splitter Maximum</td>
    </tr>
    <tr>
        <td><input type="number" name="attr_Level" /></td>
        <td><input type="number" name="attr_Splitter" /></td>
        <td><input type="number" name="attr_Splitter_max" /></td>
    </tr>
</table>
<!-- Attribute -->
<table align="center">
    <tr>
        <td colspan="2">Körper</td>
        <td colspan="2">Geist</td>
        <td colspan="2">Sozial</td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktives_Attribut" value="Koerper"></td>
        <td><input type="number" name="attr_Koerper" /></td>
        <td><input type="radio" name="attr_aktives_Attribut" value="Geist"></td>
        <td><input type="number" name="attr_Geist" /></td>
        <td><input type="radio" name="attr_aktives_Attribut" value="Sozial"></td>
        <td><input type="number" name="attr_Sozial" /></td>
    </tr>
</table>
<br><br>
<!-- Eigenschaften -->
<table align="center">
    <tr>
        <td><input type="radio" name="attr_aktive_Eigenschaft" value="Kraftvoll"></td>
        <td>Kraftvoll: </td>
        <td><input type="number" name="attr_Kraftvoll" /></td>
        <td><input type="radio" name="attr_aktive_Eigenschaft" value="Durchdacht"></td>
        <td>Durchdacht: </td>
        <td><input type="number" name="attr_Durchdacht" /></td>
        <td><input type="radio" name="attr_aktive_Eigenschaft" value="Empatisch"></td>
        <td>Empatisch: </td>
        <td><input type="number" name="attr_Empatisch" /></td>
    </tr>
    <tr>
        <td><input type="radio" name="attr_aktive_Eigenschaft" value="Geschickt"></td>
        <td>Geschickt: </td>
        <td><input type="number" name="attr_Geschickt" /></td>
        <td><input type="radio" name="attr_aktive_Eigenschaft" value="Intuitiv"></td>
        <td>Intuitiv: </td>
        <td><input type="number" name="attr_Intuitiv" /></td>
        <td><input type="radio" name="attr_aktive_Eigenschaft" value="Gerissen"></td>
        <td>Gerissen: </td>
        <td><input type="number" name="attr_Gerissen" /></td>
    </tr>

</table>
<!-- SP Fertigkeiten -->
<table>
         <tr>
             <th colspan="2">Spezial Fertigkeiten</th>
         </tr>
         <tr>
             <td colspan="2">1. Spezial Fertigkeit</td>
         </tr>
         <tr>
             <td></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_1"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/StPWvVr.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_1_E"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/Czov1Vw.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_1_leicht"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/AmSFUxH.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_1_stark"></td>
         </tr>
         <tr>
             <td colspan="2">2. Spezial Fertigkeit</td>
         </tr>
         <tr>
             <td></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_2"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/StPWvVr.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_2_E"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/Czov1Vw.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_2_leicht"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/AmSFUxH.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_2_stark"></td>
         </tr>
         <tr>
             <td colspan="2">3. Spezial Fertigkeit</td>
         </tr>
         <tr>
             <td></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_3"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/StPWvVr.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_3_E"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/Czov1Vw.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_3_leicht"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/AmSFUxH.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_3_stark"></td>
         </tr>
         <tr>
             <td colspan="2">4. Spezial Fertigkeit</td>
         </tr>
         <tr>
             <td></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_4"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/StPWvVr.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_4_E"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/Czov1Vw.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_4_leicht"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/AmSFUxH.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_4_stark"></td>
         </tr>
         <tr>
             <td colspan="2">5. Spezial Fertigkeit</td>
         </tr>
         <tr>
             <td></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_5"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/StPWvVr.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_5_E"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/Czov1Vw.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_5_leicht"></td>
         </tr>
         <tr>
             <td><img src="https://i.imgur.com/AmSFUxH.png"></td>
             <td><input type="text" name="attr_Sp_Fertigkeit_5_stark"></td>
         </tr>
     </table>

        </td>
    </tr>
    <tr>
        <td valign="top" align="center" width="50%">
<!-- Ausdauer & Willen -->
<table>
    <tr>
        <td>Ausdauer: </td>
        <td><input type="number" name="attr_Ausdauer" /></td>
    </tr>
    <tr>
        <td>Willen: </td>
        <td><input type="number" name="attr_Willen" /></td>
    </tr>
</table>
<!-- Wunden -->
<table>
    <tr>
        <td colspan="2">Körperliche Wunden</td>
    </tr>
    <tr>
        <td>Aktuelle Wunden:</td>
        <td><input type="number" name="attr_KWunden" /></td>
    </tr>
        <tr>
        <td>Maximale Wunden:</td>
        <td><span name="attr_KWunden_max"></span></td>
    </tr>
    <tr>
        <td colspan="2">Geistige Wunden</td>
    </tr>
    <tr>
        <td>Aktuelle Wunden:</td>
        <td><input type="number" name="attr_GWunden" /></td>
    </tr>
        <tr>
        <td>Maximale Wunden:</td>
        <td><span name="attr_GWunden_max"></span></td>
    </tr>

</table>
<!-- Waffen & Rüstung -->
<table>
    <tr>
        <th colspan="2">Waffen & Rüstung</th>
    </tr>
    <tr>
        <td><input type="text" name="attr_Waffe_1"></td>
        <td><input type="number" name="attr_Waffe_1_Stufe"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Waffe_2"></td>
        <td><input type="number" name="attr_Waffe_2_Stufe"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Waffe_3"></td>
        <td><input type="number" name="attr_Waffe_3_Stufe"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Waffe_4"></td>
        <td><input type="number" name="attr_Waffe_4_Stufe"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Waffe_5"></td>
        <td><input type="number" name="attr_Waffe_5_Stufe"></td>
    </tr>
</table>
 </td>
        <td valign="top" align="center" width="50%">
<!-- Feats -->
<table>
    <tr>
        <th>Feats</th>
    </tr>
    <tr>
        <td><input type="text" name="attr_Feat_1"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Feat_2"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Feat_3"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Feat_4"></td>
    </tr>
    <tr>
        <td><input type="text" name="attr_Feat_5"></td>
    </tr>
</table>
 </td>
    </tr>
</table>

<!-- Hidden values to store Fertigkeit and Eigenschafts values -->
<input type="hidden" name="attr_currentFertigkeitsValue" value="0">
<input type="hidden" name="attr_currentEigenschaftsValue" value="0">

<script type="text/worker">

on("change:Ausdauer", function() {
   getAttrs(["Ausdauer","KWunden_max"], function(values) {
      setAttrs({
          KWunden_max: values.Ausdauer * 3
      });
   });
});

on("change:Willen", function() {
   getAttrs(["Willen","GWunden_max"], function(values) {
      setAttrs({
          GWunden_max: values.Willen * 3
      });
   });
});


//aktives_Attribut wird zu Koerper, Geist oder Sozial per klick
on("change:aktives_Attribut", function() {
  console.log("# in change:aktives_Attribut");
  getAttrs(["aktives_Attribut","Wuerfel","Koerper","Geist","Sozial"], function(values) {
    setAttrs({Wuerfel: values[values.aktives_Attribut]});
    updateRemainingDie();
    updateRemainingSteigerungspunkte();
  });
});

on("change:aktive_Eigenschaft", function() {
  console.log("change aktive_Eigenschaft");
  getAttrs(["aktive_Eigenschaft","Kraftvoll","Geschickt","Durchdacht","Intuitiv","Empatisch","Gerissen"], function(values) {
    var tempCurrentEigenschaftsValue = parseInt(values[values.aktive_Eigenschaft], 10);
    setAttrs({currentEigenschaftsValue: tempCurrentEigenschaftsValue});
    updateSteigerungspunkte();
  });
});

on("change:aktive_Fertigkeit", function() {
  console.log("change aktive_Fertigkeit");
  getAttrs(["aktive_Fertigkeit","Fertigkeit_1_wert","Fertigkeit_2_wert","Fertigkeit_3_wert"
,"Fertigkeit_4_wert","Fertigkeit_5_wert","Fertigkeit_6_wert","Fertigkeit_7_wert"
,"Fertigkeit_8_wert","Fertigkeit_9_wert","Fertigkeit_10_wert","Fertigkeit_11_wert"
,"Fertigkeit_12_wert","Fertigkeit_13_wert","Fertigkeit_14_wert","Fertigkeit_15_wert"], function(values) {
    var tempCurrentFertigkeitsValue = parseInt(values[values.aktive_Fertigkeit], 10);
    setAttrs({currentFertigkeitsValue: tempCurrentFertigkeitsValue});
    updateSteigerungspunkte();
  });
});


var updateSteigerungspunkte = function () {
  console.log("updateSteigerungspunkte");
  getAttrs(["currentFertigkeitsValue", "currentEigenschaftsValue"], function(values) {
    var tempCurrentFertigkeitsValue  = parseInt(values.currentFertigkeitsValue, 10);
    var tempCurrentEigenschaftsValue = parseInt(values.currentEigenschaftsValue, 10);
    setAttrs({Steigerungspunkte: (tempCurrentFertigkeitsValue + tempCurrentEigenschaftsValue)});
  });
};

var updateRemainingDie = function () {
  console.log("# at updateRemainingDie");
  getAttrs(["Wuerfel", "Die_D12", "Die_D8", "Die_D6"], function(values) {
    var tempDiceCount = parseInt(values.Wuerfel, 10);
    tempDiceCount = tempDiceCount - values.Die_D12 - values.Die_D8 - values.Die_D6;
    console.log("# " + values.Die_D12 + " " + values.Die_D8 + " " + values.Die_D6);
    setAttrs({SR_RemainingDice: tempDiceCount});
  });
};

var updateRemainingSteigerungspunkte = function() {
  console.log("# at updateRemainingSteigerungspunkte");
  getAttrs(["Steigerungspunkte", "Die_D12", "Die_D8"], function(values) {
    var tempSpCount = parseInt(values.Steigerungspunkte, 10);
    tempSpCount = tempSpCount - (values.Die_D12 * 3) - values.Die_D8;
    console.log("# " + values.Die_D12 + " " + values.Die_D8);
    setAttrs({SR_RemainingSteigerungspunkte: tempSpCount});
  });
};
// ... etc
// Anzeige Steigerungspunkte / Verbraucht mit aktuellen Würfeln

</script>
test31
